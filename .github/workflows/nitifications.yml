name: Notifications test

on: 
  workflow_dispatch:
    inputs:
      reason:
        description: 'Reason'
        required: true 
jobs:
  notify:
    name: Notify about destroy
    runs-on: ubuntu-latest
    steps:

    - name: send custom message with args
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_TO }}
        token: ${{ secrets.TELEGRAM_TOKEN }}
        args: "The ${{ github.actor }} is trying to destroy dev because of ${{ github.event.inputs.reason }}.\n https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}" 

    - run: echo ${{ github.actor }}
